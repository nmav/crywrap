# do not edit -- automatically generated by arch changelog
# arch-tag: automatic-ChangeLog--algernon@bonehunter.rulez.org--iluvatar-archive/tlswrap--0.1
#

2003-05-05 16:29:28 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-64

    Summary:
      Fixed the init script
    Revision:
      tlswrap--0.1--patch-64

    * etc/crywrap-init.d (crywrap_start): Only pass -p, if there is a
      pemfile specified.
    
    Noticed by Ferenc Kalcso.

    modified files:
     ChangeLog etc/crywrap-init.d


2003-05-03 15:53:21 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-63

    Summary:
      In-line documentation updates
    Revision:
      tlswrap--0.1--patch-63

    * src/crywrap.c: Updated some of the internal documentation, so it looks
      better after a doxygen run (and the full source is there).

    modified files:
     ChangeLog src/crywrap.c


2003-05-03 15:19:06 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-62

    Summary:
      Added `make distsig'
    Revision:
      tlswrap--0.1--patch-62

    * Makefile.in (distsig): New target.

    modified files:
     ChangeLog Makefile.in


2003-05-03 15:15:05 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-61

    Summary:
      Use libgnutls.m4
    Revision:
      tlswrap--0.1--patch-61

    * libgnutls.m4: New file.
    * Makefile.in (EXTRA_DIST): Added it.
    * configure.ac: Use AM_PATH_LIBGNUTLS.

    new files:
     .arch-ids/libgnutls.m4.id libgnutls.m4

    modified files:
     ChangeLog Makefile.in configure.ac


2003-05-03 15:07:27 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-60

    Summary:
      Renamed to CryWrap
    Revision:
      tlswrap--0.1--patch-60

    Since there already is a project called TLSWrap, renamed this stuff to
    CryWrap.

    modified files:
     ChangeLog Makefile.in README Rules.mk.in configure.ac
     crywrap.doxy debian/README.Debian debian/changelog
     debian/control debian/copyright debian/maint/postinst
     debian/maint/postrm debian/maint/prerm debian/rules
     doc/Makefile.in doc/crywrap.8.in etc/Makefile.in
     etc/crywrap-init.d etc/crywrap.conf src/Makefile.in
     src/crywrap.c src/crywrap.h src/primes.h utils/sslwrap

    renamed files:
     .arch-ids/tlswrap.doxy.id
       ==> .arch-ids/crywrap.doxy.id
     src/.arch-ids/tlswrap.h.id
       ==> src/.arch-ids/crywrap.h.id
     src/.arch-ids/tlswrap.c.id
       ==> src/.arch-ids/crywrap.c.id
     etc/.arch-ids/tlswrap.conf.id
       ==> etc/.arch-ids/crywrap.conf.id
     etc/.arch-ids/tlswrap-init.d.id
       ==> etc/.arch-ids/crywrap-init.d.id
     doc/.arch-ids/tlswrap.8.in.id
       ==> doc/.arch-ids/crywrap.8.in.id
     tlswrap.doxy
       ==> crywrap.doxy
     src/tlswrap.h
       ==> src/crywrap.h
     src/tlswrap.c
       ==> src/crywrap.c
     etc/tlswrap.conf
       ==> etc/crywrap.conf
     etc/tlswrap-init.d
       ==> etc/crywrap-init.d
     doc/tlswrap.8.in
       ==> doc/crywrap.8.in


2003-04-29 23:31:11 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-59

    Summary:
      Fixed pidfile creation
    Revision:
      tlswrap--0.1--patch-59

    * src/tlswrap.c (main): Move the _tlswrap_setup_pidfile() call before
      _tlswrap_drop_privs(), so we can write to a root.root 755 /var/run.
    
    Noticed and reported by Xeon.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-21 10:53:34 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-58

    Summary:
      Initial Debianisation
    Revision:
      tlswrap--0.1--patch-58

    Added the debian/ infrastructure.

    new files:
     debian/.arch-ids/=id debian/.arch-ids/changelog.id
     debian/.arch-ids/control.id debian/.arch-ids/copyright.id
     debian/maint/.arch-ids/=id debian/maint/.arch-ids/postinst.id
     debian/maint/.arch-ids/postrm.id
     debian/maint/.arch-ids/prerm.id debian/.arch-ids/rules.id
     debian/.arch-ids/README.Debian.id debian/changelog
     debian/control debian/copyright debian/maint/postinst
     debian/maint/postrm debian/maint/prerm debian/rules
     debian/README.Debian

    modified files:
     ChangeLog

    new directories:
     debian/.arch-ids debian/maint/.arch-ids debian debian/maint


2003-04-21 10:49:00 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-57

    Summary:
      TLSWRAP_OPTIONS
    Revision:
      tlswrap--0.1--patch-57

    * etc/tlswrap.conf (TLSWRAP_OPTIONS): New variable.
    * etc/tlswrap-init.d (tlswrap_start): Use it.

    modified files:
     ChangeLog etc/tlswrap-init.d etc/tlswrap.conf


2003-04-21 09:46:46 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-56

    Summary:
      Init script conffile comments
    Revision:
      tlswrap--0.1--patch-56

    * etc/tlswrap.conf: Added some comments, and disabled all non-default
      settings.
    * etc/tlswrap-init.d: Emit a message if no services were started.

    modified files:
     ChangeLog etc/tlswrap-init.d etc/tlswrap.conf


2003-04-21 09:16:01 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-55

    Summary:
      Added NEWS and THANKS
    Revision:
      tlswrap--0.1--patch-55

    * NEWS: New file.
    * THANKS: Likewise.
    * Makefile.in (EXTRA_DIST): Include them.

    new files:
     .arch-ids/NEWS.id .arch-ids/THANKS.id NEWS THANKS

    modified files:
     ChangeLog Makefile.in


2003-04-20 22:30:30 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-54

    Summary:
      Updated init script
    Revision:
      tlswrap--0.1--patch-54

    * etc/tlswrap-init.d: Updated start/stop messages to look nicer.

    modified files:
     ChangeLog etc/tlswrap-init.d


2003-04-19 17:10:52 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-53

    Summary:
      ICC fix
    Revision:
      tlswrap--0.1--patch-53

    * src/primes.h (_tlswrap_prime_dh_1024): Declared static.
      (_tlswrap_generator_dh): Likewise.

    modified files:
     ChangeLog src/primes.h


2003-04-19 16:47:19 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-52

    Summary:
      Support for non-numeric services
    Revision:
      tlswrap--0.1--patch-52

    * src/tlswrap.c (_tlswrap_port_get): New function.
      (_tlswrap_addr_get): Use it.
    * src/tlswrap-init.d (tlswrap_map_add): Removed service resolving
      code, it is handled by tlswrap itself.

    modified files:
     ChangeLog etc/tlswrap-init.d src/tlswrap.c


2003-04-18 12:36:56 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-51

    Summary:
      Some more debugging aid
    Revision:
      tlswrap--0.1--patch-51

    * src/tlswrap.c (_tlswrap_do_one): Return instead of exiting.
      All users updated appropriately.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-18 12:30:56 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-50

    Summary:
      Client certificate verification, part one
    Revision:
      tlswrap--0.1--patch-50

    * src/tlswrap.h (tlswrap_config_t): Added a `verify' member.
    * src/tlswrap.c (_tlswrap_options): Added --verify.
      (_tlswrap_config_parse_opt): Parse it.
      (_tlswrap_config_parse): Default to off.
      (_tlswrap_tls_session_create): Request a client certificate if
      verification is turned on.
      (_tlswrap_do_one): Verify the certificate if requested.
    * doc/tlswrap.8.in (OPTIONS): Updated accordingly.
    * utils/sslwrap: Likewise.

    modified files:
     ChangeLog doc/tlswrap.8.in src/tlswrap.c src/tlswrap.h
     utils/sslwrap


2003-04-18 11:58:26 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-49

    Summary:
      Option reordering
    Revision:
      tlswrap--0.1--patch-49

    * src/tlswrap.c (_tlswrap_options): Moved `anon' to group two, and
      reworded the --pem option string.
    * doc/tlswrap.8.in (OPTIONS): Updated accordingly.

    modified files:
     ChangeLog doc/tlswrap.8.in src/tlswrap.c


2003-04-18 11:35:46 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-48

    Summary:
      --version
    Revision:
      tlswrap--0.1--patch-48

    * src/tlswrap.c (argp_program_version): Defined.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-18 11:19:42 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-47

    Summary:
      Do not allow port to be 0
    Revision:
      tlswrap--0.1--patch-47

    * src/tlswrap.c (_tlswrap_parse_ip): Return -1 if *port is 0.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-18 11:16:19 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-46

    Summary:
      sslwrap emulation
    Revision:
      tlswrap--0.1--patch-46

    * utils/sslwrap: New file.
    * utils/Makefile.in: Likewise.
    * configure.ac (AC_CONFIG_OUTPUT): Added utils/Makefile.
    * Makefile.in: Descend into utils from the appropriate targets.
    
    Fixes #0000026.

    new files:
     utils/.arch-ids/=id utils/.arch-ids/Makefile.in.id
     utils/.arch-ids/sslwrap.id utils/Makefile.in utils/sslwrap

    modified files:
     ChangeLog Makefile.in configure.ac

    new directories:
     utils/.arch-ids utils


2003-04-18 11:04:28 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-45

    Summary:
      Small fix to the init script
    Revision:
      tlswrap--0.1--patch-45

    * etc/tlswrap-init.d (tlswrap_start): Only put a `,' between PC and PK
      if PC is set, otherwise bad things may happen.

    modified files:
     ChangeLog etc/tlswrap-init.d


2003-04-18 10:25:18 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-44

    Summary:
      Anon-DH support
    Revision:
      tlswrap--0.1--patch-44

    * src/tlswrap.h (tlswrap_config_t): Added an `anon' member.
    * src/tlswrap.c (_tlswrap_options): Added --anon.
      (_tlswrap_config_parse_opt): Handle --anon, and do not load the
      default certificate if it was specified.
      (_tlswrap_config_parse): Turn anon-dh off by default.
      (_tlswrap_tls_session_create): Take a `config' argument, and allow
      anon-dh only if config->anon is set.
      (_tlswrap_do_one): Pass `config' down to
      _tlswrap_tls_session_create().
    * doc/tlswrap.8.in (OPTIONS): Documented --anon.
    
    Fixes #0000025.

    modified files:
     ChangeLog doc/tlswrap.8.in src/tlswrap.c src/tlswrap.h


2003-04-18 09:51:12 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-43

    Summary:
      Using pre-generated DH primes
    Revision:
      tlswrap--0.1--patch-43

    * src/primes.h: New file.
    * src/Makefile.in (HEADERS): Added it.
      (tlswrap.o): Added it to the pre-requisites.
    * src/tlswrap.c (_tlswrap_sighup_handler): New function.
      (_tlswrap_tls_reinit): Renamed to...
      (_tlswrap_tls_init): ..this, and changed to use the pre-generated
      primes.
      (main): Call _tlswrap_tls_init() early, and set up a SIGHUP handler.
      

    new files:
     src/.arch-ids/primes.h.id src/primes.h

    modified files:
     ChangeLog src/Makefile.in src/tlswrap.c


2003-04-17 22:14:54 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-42

    Summary:
      inetd mode
    Revision:
      tlswrap--0.1--patch-42

    * src/tlswrap.h (tlswrap_config_t): Added an `inetd' member.
    * src/tlswrap.c (_tlswrap_options): Added --inetd, and moved --listen
      to group three.
      (_tlswrap_config_parse_opt): Handle --inetd. At the end, don't bail
      out if there is no listening address when in inetd mode.
      (_tlswrap_config_parse): Disable inetd mode by default.
      (_tlswrap_do_one): Take two sockets: one input and one output. Use
      gnutls_transport_set_ptr2() to set them. Close both at the end.
      All users updated.
      (main): Added inetd mode.
    * doc/tlswrap.8.in (OPTIONS): Updated in the light of the above
      changes.
    
    Fixes #0000024.

    modified files:
     ChangeLog doc/tlswrap.8.in src/tlswrap.c src/tlswrap.h


2003-04-17 21:49:48 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-41

    Summary:
      Initfile fixes
    Revision:
      tlswrap--0.1--patch-41

    * etc/tlswrap.conf: Moved the map update function to the init script.
    * etc/tlswrap-init.d (tlswrap_map_add): Moved here, fixed syntax error,
      and added support for services not listed in /etc/services.

    modified files:
     ChangeLog etc/tlswrap-init.d etc/tlswrap.conf


2003-04-17 16:53:54 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-40

    Summary:
      Use a default certificate
    Revision:
      tlswrap--0.1--patch-40

    * src/tlswrap.h (_TLSWRAP_PEMFILE): New define.
    * src/tlswrap.c (_tlswrap_config_parse_opt): If there wasn't any
      certificate explictly set, use the default one.
    
    Fixes #0000021

    modified files:
     ChangeLog src/tlswrap.c src/tlswrap.h


2003-04-17 08:20:47 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-39

    Summary:
      Doxygen docs
    Revision:
      tlswrap--0.1--patch-39

    * tlswrap.doxy: New file.
    * src/tlswrap.h: Documented everything, and move the options here from
      src/tlswrap.c.
    * src/tlswrap.c: Documented everything.
    * Makefile.in (doxy): New target.
      (.PHONY): Likewise.
      (EXTRA_DIST): Added tlswrap.doxy.

    new files:
     .arch-ids/tlswrap.doxy.id tlswrap.doxy

    modified files:
     ChangeLog Makefile.in src/tlswrap.c src/tlswrap.h


2003-04-17 07:03:13 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-38

    Summary:
      Manpage update
    Revision:
      tlswrap--0.1--patch-38

    * doc/tlswrap.8: Updated to the new command-line syntax.
    
    Fixes #0000020.

    modified files:
     ChangeLog doc/tlswrap.8.in


2003-04-16 21:59:35 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-37

    Summary:
      init script update
    Revision:
      tlswrap--0.1--patch-37

    * etc/tlswrap-init.d: Updated for new commandline syntax.

    modified files:
     ChangeLog etc/tlswrap-init.d


2003-04-16 21:50:36 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-36

    Summary:
      TLS dnsname support
    Revision:
      tlswrap--0.1--patch-36

    * src/tlswrap.c (_tlswrap_session_cert_select): New function.
      (_tlswrap_tls_session_create): Use it.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 21:47:10 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-35

    Summary:
      Treat -p STUFF as -p cert=STUFF
    Revision:
      tlswrap--0.1--patch-35

    * src/tlswrap.c (_tlswrap_config_parse): Treat -p STUFF as -p
      cert=STUFF.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 21:40:19 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-34

    Summary:
      Multi-cert support
    Revision:
      tlswrap--0.1--patch-34

    * src/tlswrap.h (tlswrap_config_t): Removed ->certfile and ->keyfile.
    * src/tlswrap.c (_tlswrap_options): Removed -c and -k, added -p.
      (_tlswrap_addr_get): Do not report the error, return -1, and let
      _tlswrap_config_parse() report it.
      (_tlswrap_parse_ip): Return whatever _tlswrap_addr_get() returns.
      (_tlswrap_config_parse): Parse -p.
      (_tlswrap_tls_init): Moved it mostly to main() and
      _tlswrap_config_parse().
      (main): Moved some of the ex-_tlswrap_tls_init() stuff here, and
      changed to call _tlswrap_tls_reinit().

    modified files:
     ChangeLog src/tlswrap.c src/tlswrap.h


2003-04-16 20:47:56 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-33

    Summary:
      Fixed a warning in debug mode
    Revision:
      tlswrap--0.1--patch-33

    * src/tlswrap.c [!TLSWRAP_OPTION_DEBUG] (main): Do not define `child' in
      this case.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 20:46:03 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-32

    Summary:
      Cleanup _tlswrap_do_one()
    Revision:
      tlswrap--0.1--patch-32

    * src/tlswrap.c (_tlswrap_do_one): Removed fdset_o, it is not used. Also
      renamed fdset_i to fdset.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 20:44:05 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-31

    Summary:
      Close the client socket after gnutls_bye()
    Revision:
      tlswrap--0.1--patch-31

    * src/tlswrap.c (_tlswrap_do_one): Close the client socket after
      gnutls_bye().

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 20:42:00 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-30

    Summary:
      Yet more logging
    Revision:
      tlswrap--0.1--patch-30

    * src/tlswrap.c (_tlswrap_do_one): Log the IP and FD of the connecting
      client. Also reformatted some of the messages to be more consistent.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 20:34:22 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-29

    Summary:
      Less aggressive TLS push
    Revision:
      tlswrap--0.1--patch-29

    * src/tlswrap.c (_tlswrap_do_one): Quit the TLS push loop when ret <= o,
      ie, when the full buffer was flushed. This saves us from an ugly
      warning.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 20:27:56 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-28

    Summary:
      Debugging aid
    Revision:
      tlswrap--0.1--patch-28

    * src/tlswrap.c [TLSWRAP_OPTION_DEBUG] (main): Do not fork for each
      connection, but handle them in order.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 20:23:10 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-27

    Summary:
      #include cleanup
    Revision:
      tlswrap--0.1--patch-27

    * src/tlswrap.c: Cleaned up the #includes.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 20:21:36 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-26

    Summary:
      Fixed TLS data pushing
    Revision:
      tlswrap--0.1--patch-26

    * src/tlswrap.c (_tlswrap_set_blocking): Removed.
      (_tlswrap_do_one): Buffer is a `char' array, not a `char *'
      one. Also removed the O_NONBLOCK fiddling, improved the error
      messages, and added a while guard for gnutls_record_send.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 19:44:09 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-25

    Summary:
      Introducing: a manual page
    Revision:
      tlswrap--0.1--patch-25

    * doc/tlswrap.8.in: New file.
    * doc/Makefile.in: New file.
    * configure.ac (AC_CONFIG_FILES): Added doc/Makefile.
    * Makefile.in (all): Descend into doc/.
      (install): Likewise.
      (uninstall): Likewise.
      (mostlyclean): Likewise.
      (clean): Likewise.
      (distclean): Likewise.
      (dist): Likewise.

    new files:
     doc/.arch-ids/=id doc/.arch-ids/tlswrap.8.in.id
     doc/.arch-ids/Makefile.in.id doc/tlswrap.8.in doc/Makefile.in

    modified files:
     ChangeLog Makefile.in configure.ac

    new directories:
     doc/.arch-ids doc


2003-04-16 19:21:39 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-24

    Summary:
      Makefile cleanup
    Revision:
      tlswrap--0.1--patch-24

    * Rules.mk.in: Cleaned up some uneeded cruft.

    modified files:
     ChangeLog Rules.mk.in


2003-04-16 19:17:55 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-23

    Summary:
      Another ICC fix
    Revision:
      tlswrap--0.1--patch-23

    * src/tlswrap.c (_tlswrap_setup_pidfile): Use `%d' in the format string,
      not `%u'.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 19:13:41 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-22

    Summary:
      ICC fixes
    Revision:
      tlswrap--0.1--patch-22

    * src/tlswrap.h (tlswrap_config_t): int -> in_port_t.
      All users updated.
    * src/tlswrap.c (_tlswrap_parse_ip): Use pointer arithmetic instead of
      computing strlen().
      (_tlswrap_sighandler): closelog().
      (main): Removed closelog().
    * src/Makefile.in (WFLAGS_ICC): Adjusted.

    modified files:
     ChangeLog src/Makefile.in src/tlswrap.c src/tlswrap.h


2003-04-16 18:28:49 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-21

    Summary:
      Re-added an error message
    Revision:
      tlswrap--0.1--patch-21

    * configure.ac: Bail out if GNUTLS is not found.

    modified files:
     ChangeLog configure.ac


2003-04-16 18:27:27 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-20

    Summary:
      Added etc/
    Revision:
      tlswrap--0.1--patch-20

    * etc/tlswrap.conf: New file.
    * etc/tlswrap-init.d: Likewise.
    * etc/Makefile.in: Likewise.
    * configure.ac (AC_CONFIG_FILES): Added etc/Makefile.
    * Makefile.in (all): Descend into etc.
      (install): Likewise.
      (uninstall): Likewise.
      (mostlyclean): Likewise.
      (clean): Likewise.
      (distclean): Likewise.
      (dist): Likewise.

    new files:
     etc/.arch-ids/=id etc/.arch-ids/tlswrap.conf.id
     etc/.arch-ids/tlswrap-init.d.id etc/.arch-ids/Makefile.in.id
     etc/tlswrap.conf etc/tlswrap-init.d etc/Makefile.in

    modified files:
     ChangeLog Makefile.in configure.ac

    new directories:
     etc/.arch-ids etc


2003-04-16 18:18:06 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-19

    Summary:
      Doc update
    Revision:
      tlswrap--0.1--patch-19

    * src/tlswrap.c (_tlswrap_options): Updated -l and -d documentation. The
      separator is `/', not `:'.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 18:16:35 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-18

    Summary:
      Better network error reporting
    Revision:
      tlswrap--0.1--patch-18

    * src/tlswrap.c (_tlswrap_addr_get): Report and exit if the host could
      not be resolved.
      (_tlswrap_bind): Report unsupported AFs.
      (_tlswrap_listen): Do not mangle _tlswrap_bind()s return value.
      (main): If server_socket is negative, exit.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 18:04:17 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-17

    Summary:
      Correctly report the address we bound to
    Revision:
      tlswrap--0.1--patch-17

    * src/tlswrap.c (_tlswrap_bind): Do not use getsockname(), as we already
      have the required information at hand.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 17:46:50 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-16

    Summary:
      Allow non-numeric hosts, and shut down the TLS stuff on error.
    Revision:
      tlswrap--0.1--patch-16

    * src/tlswrap.c (_tlswrap_addr_get): Do not set AI_NUMERICHOST.
      (_tlswrap_do_one): Shut down the client upon a failed handshake.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 17:32:54 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-15

    Summary:
      sockaddr_storage stuff converted to pointers
    Revision:
      tlswrap--0.1--patch-15

    * src/tlswrap.h (tlswrap_config_t): Converted all sockaddr_storage
      variables to pointers.
    
    All users updated.

    modified files:
     ChangeLog src/tlswrap.c src/tlswrap.h


2003-04-16 16:24:14 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-14

    Summary:
      Exit in the signal handler
    Revision:
      tlswrap--0.1--patch-14

    * src/tlswrap.c (_tlswrap_sighandler): exit (0);

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 15:32:54 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-13

    Summary:
      Reordered options
    Revision:
      tlswrap--0.1--patch-13

    * src/tlswrap.c (_tlswrap_options): Put the options into logical groups.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 15:13:17 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-12

    Summary:
      Added README
    Revision:
      tlswrap--0.1--patch-12

    * README: New file.

    new files:
     .arch-ids/README.id README

    modified files:
     ChangeLog


2003-04-16 15:10:37 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-11

    Summary:
      Bail out if a file is not found during make dist
    Revision:
      tlswrap--0.1--patch-11

    * Rules.mk.in (distdir): Use set -e.

    modified files:
     ChangeLog Rules.mk.in


2003-04-16 15:07:24 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-10

    Summary:
      Pidfile support
    Revision:
      tlswrap--0.1--patch-10

    * src/tlswrap.h (tlswrap_config_t): Added a `pidfile' member.
    * src/tlswrap.c (_tlswrap_options): Added --pidfile.
      (_tlswrap_config_parse): Parse it.
      [TLSWRAP_OPTION_PIDFILE] (_tlswrap_setup_pidfile): New function.
      (_tlswrap_sighandler): Likewise.
      (main): Use them.

    modified files:
     ChangeLog src/tlswrap.c src/tlswrap.h


2003-04-16 14:36:22 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-9

    Summary:
      Cosmetic fix
    Revision:
      tlswrap--0.1--patch-9

    * src/tlswrap.c (main): Corrected a mis-indentation.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 14:31:18 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-8

    Summary:
      Sanity checking
    Revision:
      tlswrap--0.1--patch-8

    * src/tlswrap.c (_tlswrap_config_parse): Hande ARGP_KEY_END, and print
      an error if --listen or --destination was not specified.
      (_tlswrap_argp): Added \v docs at the end.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 14:18:05 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-7

    Summary:
      --cafile is not used, removed
    Revision:
      tlswrap--0.1--patch-7

    * src/tlswrap.h (tlswrap_config_t): Removed the `cafile' member.
    * src/tlswrap.c (_tlswrap_options): Removed --cafile.
      (_tlswrap_config_parse): Likewise, for parsing.
      (_tlswrap_tls_init): Do not initialse CA stuff.

    modified files:
     ChangeLog src/tlswrap.c src/tlswrap.h


2003-04-16 14:09:15 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-6

    Summary:
      Forking to the background
    Revision:
      tlswrap--0.1--patch-6

    * src/tlswrap.c [TLSWRAP_OPTION_FORK] (main): Use daemon() to go into
      the background.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 14:03:46 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-5

    Summary:
      Privilege dropping
    Revision:
      tlswrap--0.1--patch-5

    * src/tlswrap.h (tlswrap_config_t): Added a `uid' member.
    * src/tlswrap.c (_tlswrap_privs_drop): New function.
      (_tlswrap_options): Added --user.
      (_tlswrap_config_parse): Recognise it.
      (main): Use tlswrap_privs_drop().

    modified files:
     ChangeLog src/tlswrap.c src/tlswrap.h


2003-04-16 13:53:01 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-4

    Summary:
      Options, part one
    Revision:
      tlswrap--0.1--patch-4

    * configure.ac: s/THY/TLSWRAP/
    * src/tlswrap.c: Added an options section, with a set of defines.
    
    They are not used... yet.

    modified files:
     ChangeLog configure.ac src/tlswrap.c


2003-04-16 13:48:29 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-3

    Summary:
      Revert part of the previos patch
    Revision:
      tlswrap--0.1--patch-3

    * configure.ac: Do not check for gnutls.h and gnutls/compat4.h.
    
    GNUTLS3 in Debian stable is way too old to support. Should one want to
    use tlswrap there, he should compile a static version on a recent
    system.

    modified files:
     ChangeLog configure.ac


2003-04-16 13:24:25 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-2

    Summary:
      Updated documentation
    Revision:
      tlswrap--0.1--patch-2

    * src/tlswrap.c (_tlswrap_options): Added some docs.
      (_tlswrap_argp): Likewise.

    modified files:
     ChangeLog src/tlswrap.c


2003-04-16 13:15:12 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	patch-1

    Summary:
      First step towards GNUTLS4 compatibility
    Revision:
      tlswrap--0.1--patch-1

    * configure.ac: Check for gnutls.h and gnutls/compat4.h, but not for
      gnutls-extra.
    * src/Makefile.in (LIBS): Removed -lgnutls-extra.
      (tlswrap.o): New target.
    * src/tlswrap.c: Adjusted includes.

    modified files:
     ChangeLog configure.ac src/Makefile.in src/tlswrap.c


2003-04-16 12:50:21 GMT	Gergely Nagy <algernon@bonehunter.rulez.org>	base-0

    Summary:
      Initial import
    Revision:
      tlswrap--0.1--base-0

    This is the initial import of TLSWrap. It is undocumented, and not too
    featureful, but works to some extent.

    new files:
     ./.arch-ids/AUTHORS.id ./.arch-ids/COPYING.id
     ./.arch-ids/ChangeLog.id ./.arch-ids/INSTALL.id
     ./.arch-ids/Makefile.in.id ./.arch-ids/Rules.mk.in.id
     ./.arch-ids/config.guess.id ./.arch-ids/config.sub.id
     ./.arch-ids/configure.ac.id ./.arch-ids/install-sh.id
     ./AUTHORS ./COPYING ./ChangeLog ./INSTALL ./Makefile.in
     ./Rules.mk.in ./config.guess ./config.sub ./configure.ac
     ./install-sh ./src/.arch-ids/=id
     ./src/.arch-ids/Makefile.in.id ./src/.arch-ids/tlswrap.c.id
     ./src/.arch-ids/tlswrap.h.id ./src/Makefile.in ./src/tlswrap.c
     ./src/tlswrap.h


